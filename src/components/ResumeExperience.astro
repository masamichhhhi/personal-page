---
import { formatDateRange } from '@utils/formatDate';
import type { WorkExperience } from '@/types/resume';

interface Props {
  experiences: WorkExperience[];
}

const { experiences } = Astro.props;
---

<section class="mb-12">
  <h2 class="text-2xl font-bold text-gray-900 mb-6 pb-2 border-b border-gray-200">
    Work Experience
  </h2>
  <div class="space-y-8">
    {experiences.map((exp) => (
      <div class="relative pl-6 border-l-2 border-gray-200">
        <div class="absolute -left-2 top-0 w-4 h-4 bg-blue-600 rounded-full" />
        <div class="mb-2">
          <h3 class="text-xl font-semibold text-gray-900">{exp.role}</h3>
          <div class="flex flex-wrap items-center gap-2 text-gray-600">
            {exp.companyUrl ? (
              <a
                href={exp.companyUrl}
                target="_blank"
                rel="noopener noreferrer"
                class="font-medium hover:text-blue-600 transition-colors"
              >
                {exp.company}
              </a>
            ) : (
              <span class="font-medium">{exp.company}</span>
            )}
            {exp.location && (
              <>
                <span class="text-gray-400">â€¢</span>
                <span>{exp.location}</span>
              </>
            )}
          </div>
          <p class="text-sm text-gray-500 mt-1">
            {formatDateRange(exp.startDate, exp.endDate)}
          </p>
        </div>
        <p class="text-gray-700 leading-relaxed">{exp.description}</p>
      </div>
    ))}
  </div>
</section>
