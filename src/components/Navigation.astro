---
const navLinks = [
  { href: '/', label: 'Home' },
  { href: '/blog', label: 'Blog' },
  { href: '/aboutme', label: 'About me' },
];

const currentPath = Astro.url.pathname;
---

<nav>
  <!-- Desktop Navigation -->
  <ul class="hidden md:flex items-center gap-6">
    {navLinks.map((link) => (
      <li>
        <a
          href={link.href}
          class:list={[
            'text-sm font-medium transition-colors no-underline',
            currentPath === link.href || (link.href !== '/' && currentPath.startsWith(link.href))
              ? 'text-blue-600 dark:text-blue-400'
              : 'text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-white',
          ]}
        >
          {link.label}
        </a>
      </li>
    ))}
  </ul>

  <!-- Mobile Navigation -->
  <div class="md:hidden">
    <button
      id="mobile-menu-button"
      type="button"
      class="p-2 text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-white"
      aria-label="Toggle menu"
    >
      <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
      </svg>
    </button>

    <div id="mobile-menu" class="hidden absolute top-full left-0 right-0 bg-white dark:bg-gray-900 border-b border-gray-200 dark:border-gray-700 shadow-lg">
      <ul class="container py-4 space-y-2">
        {navLinks.map((link) => (
          <li>
            <a
              href={link.href}
              class:list={[
                'block py-2 text-sm font-medium transition-colors no-underline',
                currentPath === link.href || (link.href !== '/' && currentPath.startsWith(link.href))
                  ? 'text-blue-600 dark:text-blue-400'
                  : 'text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-white',
              ]}
            >
              {link.label}
            </a>
          </li>
        ))}
      </ul>
    </div>
  </div>
</nav>

<script>
  const button = document.getElementById('mobile-menu-button');
  const menu = document.getElementById('mobile-menu');

  button?.addEventListener('click', () => {
    menu?.classList.toggle('hidden');
  });

  // Close menu when clicking outside
  document.addEventListener('click', (e) => {
    if (!button?.contains(e.target as Node) && !menu?.contains(e.target as Node)) {
      menu?.classList.add('hidden');
    }
  });
</script>
