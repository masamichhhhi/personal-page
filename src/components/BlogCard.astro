---
import { formatDate } from '@utils/formatDate';
import TagList from './TagList.astro';

interface Props {
  title: string;
  slug: string;
  publishedAt: Date;
  summary?: string;
  tags?: string[];
  readingTime?: string;
}

const { title, slug, publishedAt, summary, tags = [], readingTime } = Astro.props;
const safeTitle = title?.trim();
const safeSlug = slug?.trim();
const isValid = Boolean(safeTitle && safeSlug && publishedAt);
---

{isValid && (
  <article class="group blog-card p-6">
    <a href={`/blog/${safeSlug}`} class="block no-underline">
      <div class="flex flex-col gap-3">
        <div class="flex flex-wrap items-center gap-3 text-xs blog-muted">
          <time datetime={publishedAt.toISOString()}>{formatDate(publishedAt)}</time>
          {readingTime && <span>{readingTime}</span>}
        </div>
        <h3 class="text-xl md:text-2xl font-semibold blog-ink group-hover:text-gray-700 transition-colors">
          {safeTitle}
        </h3>
        {summary && <p class="text-gray-600 line-clamp-2">{summary}</p>}
      </div>
    </a>
    {tags.length > 0 && (
      <div class="mt-3">
        <TagList tags={tags} linked={false} />
      </div>
    )}
  </article>
)}
