---
import BaseLayout from '@layouts/BaseLayout.astro';
import ResumeExperience from '@components/ResumeExperience.astro';
import ResumeSkills from '@components/ResumeSkills.astro';
import ResumeProjects from '@components/ResumeProjects.astro';
import ResumeCertifications from '@components/ResumeCertifications.astro';
import ResumePublications from '@components/ResumePublications.astro';
import { loadResume } from '@utils/loadResume';

const resume = loadResume();
---

<BaseLayout
  title={`About me - ${resume.name} | masamichhhi`}
  description={`${resume.title} - ${resume.summary.slice(0, 150)}...`}
>
  <div class="container py-12">
    <!-- Header -->
    <header class="mb-12 text-center print:text-left">
      <div class="mb-6 flex justify-center print:justify-start">
        <img
          src="/profile.jpg"
          alt={resume.name}
          class="w-32 h-32 md:w-40 md:h-40 rounded-full object-cover shadow-lg"
          loading="lazy"
          decoding="async"
        />
      </div>
      <h1 class="text-4xl md:text-5xl font-bold text-gray-900 mb-2">
        {resume.name}
      </h1>
      <p class="text-xl text-gray-600 mb-4">{resume.title}</p>
      <div class="flex flex-wrap justify-center print:justify-start gap-4 text-sm text-gray-600">
        <a href={`mailto:${resume.email}`} class="flex items-center gap-1 hover:text-blue-600 transition-colors">
          <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />
          </svg>
          {resume.email}
        </a>
        {resume.location && (
          <span class="flex items-center gap-1">
            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z" />
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z" />
            </svg>
            {resume.location}
          </span>
        )}
      </div>
    </header>

    <!-- Summary -->
    <section class="mb-12">
      <h2 class="text-2xl font-bold text-gray-900 mb-4 pb-2 border-b border-gray-200">
        Summary
      </h2>
      <p class="text-gray-700 leading-relaxed">{resume.summary}</p>
    </section>

    <!-- Skills -->
    <ResumeSkills skills={resume.skills} />

    <!-- Experience -->
    <ResumeExperience experiences={resume.experiences} />

    <!-- Projects -->
    <ResumeProjects projects={resume.projects} />

    <!-- Certifications -->
    {resume.certification && resume.certification.length > 0 && (
      <ResumeCertifications certifications={resume.certification} />
    )}

    <!-- Publications -->
    {resume.publication && resume.publication.length > 0 && (
      <ResumePublications publications={resume.publication} />
    )}

    <!-- Print Button (hidden in print) -->
    <div class="mt-8 text-center no-print">
      <button
        onclick="window.print()"
        class="inline-flex items-center gap-2 px-6 py-3 bg-gray-900 text-white rounded-lg hover:bg-gray-800 transition-colors"
      >
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z" />
        </svg>
        Print / Save as PDF
      </button>
    </div>
  </div>
</BaseLayout>
